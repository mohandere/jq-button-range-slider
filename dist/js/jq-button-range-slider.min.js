/*
 *  jq-button-range-slider - v1.0.0
 *  jQuery range slider plugin with buttons as a values.
 *  https://mohandere.github.io/jq-button-range-slider/
 *
 *  Made by Mohan Dere
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="jqButtonRangeSlider",g={className:"yo-button-range-slider",sliderOptions:[],template:'<% for ( var i = 0; i < sliderOptions.length; i++ ) { %> <button type="button" class="yo-btn yo-range-btn" value="<%=sliderOptions[i].value%>"><%=sliderOptions[i].name%></button><% } %>'};a.extend(e.prototype,{tmpl:function(a,b){var d=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):cache[a]=cache[a]||tmpl(c.getElementById(a).innerHTML);return b?d(b):d},init:function(){if(!this.settings.sliderOptions.length)throw new Error("JqButtonRangeSlider plugin parameter `sliderOptions` is required!");return this.sliderLength=0,this.sliderMaxIndex=0,this.lastClickedButtonIndex=-9999,this.sliderVars={lowerBound:{index:-1},upperBound:{index:-1}},this.sliderLength=this.settings.sliderOptions.length,this.sliderMaxIndex=this.sliderLength-1,this.render(),this},render:function(){return this.$el=a(this.element),this.$el.addClass(this.settings.className),this.$el.html(this.tmpl(this.settings.template,{sliderOptions:this.settings.sliderOptions})),this.$sliderButtons=this.$el.find(".yo-range-btn"),this.bindEvents(),this.$el.trigger("yo:init"),this},bindEvents:function(){this.$sliderButtons.click(this.rangeBtnClicked.bind(this)),this.$el.on("yo:reset",function(){this.yoReset()}.bind(this)),this.$el.on("yo:destroy",function(){this.yoDestroy()}.bind(this))},rangeBtnClicked:function(b){var c=this,d=a(b.currentTarget),e=this.$sliderButtons.index(d),f=this.getDirectionToMove(e);switch(f){case"L":this.lastClickedButtonIndex===e||this.deActivateBtnAtIndex(e,f)?(e+=1,this.setSliderBounds(e)):this.isLowerBoundSet()?e>this.getSliderBounds(1)?this.setSliderBounds(e,1):this.setSliderBounds(e):(this.setSliderBounds(e),this.setSliderBounds(e,1));break;case"R":this.lastClickedButtonIndex===e||this.deActivateBtnAtIndex(e,f)?(e-=1,this.setSliderBounds(e,1)):this.isUpperBoundSet()?e<this.getSliderBounds()?this.setSliderBounds(e):this.setSliderBounds(e,1):(this.setSliderBounds(e),this.setSliderBounds(e,1))}this.highlightsUI(),this.lastClickedButtonIndex=e;var g=this.$el.find(".yo-range-btn.active").length;return g||this.reset(),this.$el.trigger("yo:change",[c.getSliderValue(),c.getSliderRangeValue(),this.$el]),!1},deActivateBtnAtIndex:function(a,b){var c,d,e=this.$el.find(".yo-range-btn.active").length;switch(e||(c=!1),b){case"L":var f=this.$el.find(".yo-range-btn.active").eq(0);d=this.$sliderButtons.index(f),c=d===a;break;case"R":var g=this.$el.find(".yo-range-btn.active").eq(e-1);d=this.$sliderButtons.index(g),c=d===a}return c||(c=!1),c},highlightsUI:function(){this.$sliderButtons.removeClass("active");for(var a=this.sliderVars.lowerBound.index;a<=this.sliderVars.upperBound.index;a++)this.$sliderButtons.eq(a).addClass("active")},isLowerBoundSet:function(){return this.sliderVars.lowerBound.index>-1},isUpperBoundSet:function(){return this.sliderVars.upperBound.index>-1},getSliderRangeValue:function(){var a=this.$sliderButtons.eq(this.sliderVars.lowerBound.index).attr("value"),b=this.$sliderButtons.eq(this.sliderVars.upperBound.index).attr("value"),c={lb:{index:this.sliderVars.lowerBound.index,value:a},ub:{index:this.sliderVars.upperBound.index,value:b}};return c},getSliderValue:function(){var b=[];return this.$el.find(".yo-range-btn.active").each(function(c,d){b.push(a(d).val())}),b},getDirectionToMove:function(a){var b=[0,this.sliderMaxIndex];this.isLowerBoundSet()&&this.isUpperBoundSet()&&(b=[this.getSliderBounds(),this.getSliderBounds(1)]);var c=b.reduce(function(b,c){return Math.abs(c-a)<Math.abs(b-a)?c:b});return c===b[1]?"R":"L"},getSliderBounds:function(a){return a?this.sliderVars.upperBound.index:this.sliderVars.lowerBound.index},setSliderBounds:function(a,b){b?this.sliderVars.upperBound.index=a:this.sliderVars.lowerBound.index=a},yoReset:function(){this.setSliderBounds(-9999),this.setSliderBounds(-9999,1),this.highlightsUI(),this.lastClickedButtonIndex=-9999},yoDestroy:function(){this.$el.unbind(),this.$el.html("")},yoSetRange:function(a){this.sliderVars.lowerBound.value=a.lb,this.sliderVars.upperBound.value=a.ub,this.highlightsUI()}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);